# Feature Specification: GitHub Pages Deployment

**Feature Branch**: `005-gh-pages-deploy`  
**Created**: 2026-01-26  
**Status**: Draft  
**Input**: User description: "Host Codex Cryptica as a static SPA on GitHub Pages with automated deployment via GitHub Actions"

## User Scenarios & Testing

### User Story 1 - Web Access (Priority: P1)

As a user, I want to access my Codex Cryptica app via a public URL (e.g., `https://codexcryptica.com/`) so that I can use the app without running it locally.

**Why this priority**: Essential for non-developer usage and cross-device convenience.

**Independent Test**: The app can be reached via the GitHub Pages URL, and the main UI loads successfully.

**Acceptance Scenarios**:

1. **Given** the app is deployed to GitHub Pages, **When** I navigate to the URL, **Then** the Codex Cryptica header and landing page are displayed.
2. **Given** the app is loaded from GitHub Pages, **When** I refresh the page on a sub-route (if any exist), **Then** I am not shown a 404 error (SPA routing works).

---

### User Story 2 - Automated Delivery (Priority: P2)

As a developer, I want the app to automatically deploy to GitHub Pages whenever I push changes to the `main` branch so that the online version is always up to date.

**Why this priority**: Reduces manual overhead and ensures consistency between local and live versions.

**Independent Test**: Push a minor change to `main` and verify that the GitHub Action triggers, completes, and the live site updates.

**Acceptance Scenarios**:

1. **Given** a new commit on `main`, **When** the GitHub Action completes, **Then** the `gh-pages` branch is updated with new build artifacts.

## Requirements

### Functional Requirements

- **FR-001**: System MUST use `@sveltejs/adapter-static` to generate a static site compatible with GitHub Pages.
- **FR-002**: System MUST be configured for Single Page Application (SPA) mode, ensuring that the `index.html` serves as the fallback for all routes (to avoid 404s on refresh).
- **FR-003**: System MUST handle the repository subdirectory path (e.g., `/Codex-Arcana/`) for all internal links and asset references.
- **FR-004**: System MUST include a GitHub Actions workflow that automates the build and deployment process.
- **FR-005**: System MUST securely inject the `VITE_GOOGLE_CLIENT_ID` environment variable during the CI/CD build process using GitHub Secrets.

### Key Entities

- **Deployment Workflow**: The YAML configuration defining the CI/CD pipeline.
- **Build Artifacts**: The static HTML/JS/CSS files generated by the Svelte build process.

## Success Criteria

### Measurable Outcomes

- **SC-001**: The live app loads in under 3 seconds using 'Fast 3G' throttling.
- **SC-002**: 100% of site refreshes result in a valid page load (no 404s).
- **SC-003**: Deployment finishes in under 5 minutes from the time of push to `main`.
